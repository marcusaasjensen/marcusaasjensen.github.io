{% import "macros.html" as macros %}
<!doctype html>
<html class="not-ready lg:text-base" lang="{{ lang }}">
  {% include "partials/head.html" %}
  <body class="text-black duration-200 ease-out dark:text-white">
    {% include "partials/header.html" %}

    {% include "injects/body_start.html" ignore missing %}

    <main
      class="prose prose-neutral dark:prose-invert prose-pre:rounded-lg prose-img:rounded-lg relative mx-auto min-h-[calc(100vh-9rem)] max-w-3xl px-4 pt-24 pb-16 break-words lg:pt-32"
    >
      {% block main %}

      {% if paginator is undefined or paginator.current_index == 1 %}
      {% include "partials/profile.html" %}
      {% endif %}
      
      <p>
        I am a french software engineer making games on the side to tell stories.
        This is my personal website where I share my projects, experiences,
        and insights into the world of technology and game development.
        I mostly work with Unity and C# to create tools and video games.
      </p>

      <div class="not-prose my-8">
        <h3 class="text-lg font-semibold mb-4 text-black dark:text-white">Core Skills</h3>
        <div
          class="skills-container flex flex-wrap justify-center items-center gap-4 sm:gap-6 text-center relative"
        >
          <a href="https://en.wikipedia.org/wiki/Unity_(game_engine)" target="_blank" rel="noopener" title="Unity">
            <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/unity/unity-original.svg"
                alt="Unity" class="skill-icon w-8 h-8 sm:w-10 sm:h-10 object-contain" />
          </a>

          <a href="https://en.wikipedia.org/wiki/C_Sharp_(programming_language)" target="_blank" rel="noopener" title="C#">
            <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/csharp/csharp-original.svg"
                alt="C#" class="skill-icon w-8 h-8 sm:w-10 sm:h-10 object-contain" />
          </a>

          <a href="https://en.wikipedia.org/wiki/C%2B%2B" target="_blank" rel="noopener" title="C++">
            <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/cplusplus/cplusplus-original.svg"
                alt="C++" class="skill-icon w-8 h-8 sm:w-10 sm:h-10 object-contain" />
          </a>

          <a href="https://en.wikipedia.org/wiki/JavaScript" target="_blank" rel="noopener" title="JavaScript">
            <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg"
                alt="JavaScript" class="skill-icon w-8 h-8 sm:w-10 sm:h-10 object-contain" />
          </a>

          <a href="https://en.wikipedia.org/wiki/HTML" target="_blank" rel="noopener" title="HTML">
            <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg"
                alt="HTML" class="skill-icon w-8 h-8 sm:w-10 sm:h-10 object-contain" />
          </a>

          <a href="https://en.wikipedia.org/wiki/CSS" target="_blank" rel="noopener" title="CSS">
            <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg"
                alt="CSS" class="skill-icon w-8 h-8 sm:w-10 sm:h-10 object-contain" />
          </a>

          <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" target="_blank" rel="noopener" title="Java">
            <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg"
                alt="Java" class="skill-icon w-8 h-8 sm:w-10 sm:h-10 object-contain" />
          </a>
        </div>
      </div>

      <div class="relative w-full">
        <img 
          src="{{ get_url(path='images/banner.png') }}" 
          alt="Site banner"
          class="w-full h-48 object-cover"
        />
          <canvas id="particle-canvas"></canvas>
      </div>
      {% endblock main %}
    </main>
    
    {% include "partials/footer.html" %}
    {% include "injects/body_end.html" ignore missing %}

    <style>
      .skill-icon {
        transition: transform 0.25s ease, filter 0.25s ease;
      }

      .skill-icon:hover {
        transform: scale(1.2);
        filter: drop-shadow(0 4px 6px rgba(0,0,0,0.2));
      }
    </style>

    <script>
      const container = document.querySelector(".skills-container");
      const icons = container.querySelectorAll(".skill-icon");

      container.addEventListener("mousemove", (e) => {
        const rect = container.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        const mouseY = e.clientY - rect.top;

        icons.forEach((icon) => {
          const iconRect = icon.getBoundingClientRect();
          const iconX = iconRect.left + iconRect.width / 2 - rect.left;
          const iconY = iconRect.top + iconRect.height / 2 - rect.top;

          const dist = Math.hypot(mouseX - iconX, mouseY - iconY);
          const scale = Math.max(1, 1.4 - dist / 200);
          icon.style.transform = `scale(${scale})`;
        });
      });

      container.addEventListener("mouseleave", () => {
        icons.forEach((icon) => {
          icon.style.transform = "scale(1)";
        });
      });
    </script>
  </body>
</html>

<script>
  const canvas = document.getElementById("particle-canvas");
  const ctx = canvas.getContext("2d");
  let particles = [];

  function resizeCanvas() {
    canvas.width = canvas.clientWidth;
    canvas.height = canvas.clientHeight;
  }
  window.addEventListener("resize", resizeCanvas);
  resizeCanvas();

  class Particle {
    constructor(x, y) {
      this.x = x;
      this.y = y;
      this.size = Math.random() * 2 + 1; // ðŸ”¹ tiny squares
      this.speedX = (Math.random() - 0.5) * 1.2; // ðŸ”¹ slow drift
      this.speedY = (Math.random() - 0.5) * 1.2;
      this.alpha = 1;

      const hues = [160, 170, 180, 190, 200];
      const hue = hues[Math.floor(Math.random() * hues.length)];
      this.color = `hsl(${hue}, 70%, 55%)`;
      this.life = 0;
      this.maxLife = 150 + Math.random() * 50; // total lifespan
    }

    update() {
      this.x += this.speedX;
      this.y += this.speedY;
      this.life++;

      // fade out naturally
      if (this.life > this.maxLife * 0.6) {
        this.alpha -= 0.01;
      }
    }

    draw() {
      ctx.globalAlpha = this.alpha;
      ctx.fillStyle = this.color;
      ctx.fillRect(this.x, this.y, this.size, this.size);
      ctx.globalAlpha = 1;
    }
  }

  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach((p, i) => {
      p.update();
      p.draw();

      // remove before touching borders OR fully faded
      if (
        p.alpha <= 0 ||
        p.x < 10 || p.x > canvas.width - 10 ||
        p.y < 10 || p.y > canvas.height - 10
      ) {
        particles.splice(i, 1);
      }
    });
    requestAnimationFrame(animate);
  }
  animate();

  // Trigger burst on E
  window.addEventListener("keydown", (e) => {
    if (e.key.toLowerCase() === "e") {
      const x = canvas.width / 2;  // center of banner
      const y = canvas.height / 2;
      for (let i = 0; i < 100; i++) {
        particles.push(new Particle(x, y));
      }
    }
  });
</script>
